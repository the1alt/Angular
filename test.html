<!doctype html>
<html ng-app="ngMap">
<head>
  <link rel="stylesheet" href="app/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="app/angularjs-slider/dist/rzslider.min.css" media="screen" title="no title">
  <link rel="stylesheet" href="css/animate.css" media="screen" title="no title">
  <link rel="stylesheet" href="css/main.css" media="screen" title="no title">

    <!--JQUERY-->
  <script src="app/jquery/dist/jquery.min.js" charset="utf-8"></script>
    <!--BOOTSTRAP-->
  <script src="app/bootstrap/dist/js/bootstrap.min.js" charset="utf-8"></script>
    <!--ANGULAR-->
  <script src="app/angular/angular.min.js" charset="utf-8"></script>
    <!--ANGULAR JS SLIDER-->
  <script src="app/angularjs-slider/dist/rzslider.min.js" charset="utf-8"></script>
  <!-- Google Map -->
  <script src="http://maps.google.com/maps/api/js?key=AIzaSyBU0qM8Nt7ZqQDVVDWRum4zF7KOpVOM8k8"></script>
    <!-- NG MAP -->
  <script src="app/ngmap/build/scripts/ng-map.min.js"></script>
<script>
angular.module('ngMap').controller('MyCtrl', function(NgMap) {
  var vm = this;
  NgMap.getMap().then(function(map) {
    console.log('map', map);
    vm.map = map;
  });

  vm.clicked = function() {
    alert('Clicked a link inside infoWindow');
  };

  vm.shops = [
    {id:'foo', name: 'FOO SHOP', position:[41,-87]},
    {id:'bar', name: 'BAR SHOP', position:[42,-86]}
  ];
  vm.shop = vm.shops[0];

  vm.showDetail = function(e, shop) {
    vm.shop = shop;
    vm.map.showInfoWindow('foo-iw', shop.id);
  };

  vm.hideDetail = function() {
    vm.map.hideInfoWindow('foo-iw');
  };
});
</script>
</head>
<body>
  <div ng-controller="MyCtrl as vm">
    <ng-map default-style="true" center="41,-87" zoom="3">
      <marker id='{{shop.id}}' position="{{shop.position}}"
        ng-repeat="shop in vm.shops"
        on-click="vm.showDetail(shop)">
      </marker>

      <info-window id="foo-iw">
        <div ng-non-bindable="">
          id: {{vm.shop.id}}<br/>
          name: {{vm.shop.name}}<br/>
          Position 1: {{vm.shop.position}}<br/>
          Position 2: {{anchor.getPosition()}}<br/>
          Position 3: {{vm.map.markers[vm.shop.id].getPosition()}}<br/>
          <a href="#" ng-click="vm.clicked()">Click Here</a>
        </div>
      </info-window>
    </ng-map>

    <button ng-click="vm.showDetail(e, vm.shop)">
      show InfoWindow of the shop
    </button>
    <button ng-click="vm.hideDetail(e, vm.shop)">
      Hide InfoWindow of the shop
    </button>
  </div>
</body>
</html>

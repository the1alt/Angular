<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Angular</title>
  <link rel="stylesheet" href="app/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="app/angularjs-slider/dist/rzslider.min.css" media="screen" title="no title">
  <link rel="stylesheet" href="css/animate.css" media="screen" title="no title">
  <link rel="stylesheet" href="css/main.css" media="screen" title="no title">

    <!--JQUERY-->
  <script src="app/jquery/dist/jquery.min.js" charset="utf-8"></script>
    <!--BOOTSTRAP-->
  <script src="app/bootstrap/dist/js/bootstrap.min.js" charset="utf-8"></script>
    <!--ANGULAR-->
  <script src="app/angular/angular.min.js" charset="utf-8"></script>
    <!--ANGULAR JS SLIDER-->
  <script src="app/angularjs-slider/dist/rzslider.min.js" charset="utf-8"></script>
  <!-- Google Map -->
  <script src="http://maps.google.com/maps/api/js?key=AIzaSyBU0qM8Nt7ZqQDVVDWRum4zF7KOpVOM8k8"></script>
    <!-- NG MAP -->
  <script src="app/ngmap/build/scripts/ng-map.min.js"></script>
    <!--Script-->
  <script src="js/usersAPI.js" charset="utf-8"></script>
</head>
  <body ng-app="appUsers" id="body">
    <div class="container">
      <section ng-controller="UsersCtrl" >

        <div class="row">

          <div class="container">
            <h3>Gestion des agents</h3>
            <hr/>
            <div class="row">
                Afficher les agents présents dans :
                <select name="affichePosition" ng-model="affichePosition">
                  <option value="tous">les deux émisphères</option>
                  <option value="Nord">l'émisphère nord</option>
                  <option value="Sud">l'émisphère sud</option>
                </select>
                <button type="button" ng-click="mapShow()" name="button" class="btn btn-danger btn-xs"><span ng-if="showMap === false">Afficher la map</span><span ng-if="showMap === true">Masquer la map</span></button>

            </div>

            <div class="col-md-8 map mapClose" >
              <!-- <div map-lazy-load="https://maps.google.com/maps/api/js"> -->
                <ng-map default-style="true" center="[{{ lat }},{{ lng }}]" zoom="{{ zoom }}" max-zoom="12" min-zoom="1">
                  <marker id="{{user.id}}" ng-repeat="user in users| triPosition:affichePosition track by $index" on-click="showDetail(user)" position="{{ user.address.geo.lat }}, {{ user.address.geo.lng }}" title="{{ user.name }}"></marker>

                  <info-window id="foo-iw">
                    <div ng-non-bindable="">
                      id: {{ user.id }}<br/>
                      name: {{ user.name}}<br/>
                      Position : {{ user.address.suite}},<br/>
                      {{ user.address.street }} street,<br/>
                      {{ user.address.zipcode }} {{ user.address.city }}<br/>
                      <a href="#" ng-click="clicked()">Click Here</a>
                    </div>
                  </info-window>
                </ng-map>
              </div>
            </div>
            <div class="row">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th class="text-center">Agent</th>
                    <th class="text-center">Nom</th>
                    <th class="text-center">Surnom</th>
                    <th class="text-center">Immatriculation</th>
                    <th class="text-center">Email</th>
                    <th class="text-center">Site</th>
                    <th class="text-center">Planque</th>
                    <th class="text-center">Afficher sur la carte</th>
                    <th class="text-center">Supprimer</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- | triMajeur:afficheMajeur | filtreVille:triVille | filtreSport:triSport | limitTo:nbrAfficheUser -->
                  <tr ng-repeat="user in users | triPosition:affichePosition track by $index">
                    <td class="text-center" ng-if="user.id < 10">00{{ user.id }}</td>
                    <td class="text-center" ng-if="user.id >= 10">0{{ user.id }}</td>
                    <td class="text-center">{{ user.name }}</td>
                    <td class="text-center">{{ user.username }}</td>
                    <td class="text-center">{{ user.phone }}</td>
                    <td class="text-center">{{ user.email }}</td>
                    <td class="text-center"><a href="{{ user.website }}">{{ user.website }}</a> </td>
                    <td class="text-center"><p>{{ user.address.suite }}, {{ user.address.street }} street, {{ user.address.zipcode }} {{ user.address.city }}</p>
                    </td>
                    <td class="text-center"><button type="button" class="btn btn-primary btn xs glyphicon glyphicon-map-marker" ng-click="afficheCarte($index)"></button></td>
                    <td class="text-center"><button type="button" class="btn btn-danger btn-xs glyphicon glyphicon-remove" name="button" ng-click='suppUser($index)'></button></td>
                  </tr>
                </tbody>
                <!-- LimitTo filtre le nombre d'éléments a afficher -->
              </table>
            </div>
          </div>
        </div>
        <div class="row">

        </div>

      </section>
    </div>


  </body>
</html>
